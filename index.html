<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>Hava Durumu</title>
    <link rel="stylesheet" href="style.css"> 
    


    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=search" />
     <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
 <script src="script.js" defer></script> 
</head>
<body>

    <main class="main-container"> 
        <header class="input-container">
        <input class="city-input" placeholder="Search City" type="text">  
        <button type="button" class="search-btn">  
    <span class="material-symbols-outlined">     
        search
    </span>
</button>

<button id="openModal">ðŸ“·</button>

    <div class="modal" id="modal">
      <div class="modal-inner">
            <h2>hava durumu iÃ§in kodu okutun</h2>
            <canvas id="qrcodeCanvas"></canvas>
            <div id="qrcode" style="text-align: center;"></div>
            <button id="closeModal">Close</button>
        </div>  
    </div>
         
         <button id="getLocationBtn">Konumumu Kullan</button>     
         <div id ="weatherResult"></div> 
         <div class="suggestion-box"></div> 
         
    
    </header>
    
    <section class="weather-info" style="display: none;"> 
        <div class="location-date-container">     
            <div class="location">
               <img src="bilesenler/location.svg">
            
                <h4 class="country-txt">Ä°stanbul</h4>
        </div>
        <h5 class="current-date-txt regular-txt">PerÅŸembe, 24 Nisan</h5>
     </div>

     <div class="weather-summary-container"> 
         <img src="bilesenler/wi-day-cloudy.svg" class="weather-summary-img">
         <div class="weather-summary-info">
            <h1 class="temp-txt">17Â°C</h1>
            <h3 class="condition-txt regular-txt">ParÃ§alÄ± bulutlu</h3>

         </div>

     </div>




       <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
    <script>
        // Modal ve Butonlar
        const openBtn = document.getElementById("openModal");
        const closeBtn = document.getElementById("closeModal");
        const modal = document.getElementById("modal");

        // QR Kodunu GÃ¶sterme Fonksiyonu
        function qrKodGoster(veri) {
            // QR objesi zaten varsa temizle
            if (window.qrKodObjesi) {
                window.qrKodObjesi.clear(); // Ã–ncekini sil
            }

            // Yeni QR oluÅŸtur
            window.qrKodObjesi = new QRCode(document.getElementById("qrcode"), {
                text: veri,
                width: 128,
                height: 128,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: 'L', // Hata dÃ¼zeyini burada 'L' olarak yazdÄ±k
            });
        }

        // Modal'Ä± aÃ§ma
        openBtn.addEventListener("click", () => {
            modal.classList.add("open");
            setTimeout(() => {
                // Verileri al
                const currentCity = document.querySelector('.country-txt').textContent.trim();
                const currentTemp = document.querySelector('.temp-txt').textContent.trim();
                const currentCondition = document.querySelector('.condition-txt').textContent.trim();

                const weatherData = {
                    city: currentCity,
                    temp: currentTemp,
                    condition: currentCondition
                };

                const jsonData = JSON.stringify(weatherData); // Veriyi JSON'a Ã§evir
                console.log("QR kod iÃ§eriÄŸi:", jsonData); // Konsolda veri
                qrKodGoster(jsonData); // QR kodunu oluÅŸtur
            }, 100);
        });

        // Modal'Ä± kapama
        closeBtn.addEventListener("click", () => {
            modal.classList.remove("open");
            document.getElementById("qrcode").innerHTML = ""; // QR kodu temizle
        });
    </script>
     
     <div class="weather-conditions-container">  
        <div class="conditions-item">
            <img src="bilesenler/water drop.svg">
            <div class="conditions-info">
                <h5 class="regular-txt">Nem</h5>
                <h5 class="Nem-value-txt">76%</h5>
            </div>
        </div>

        <div class="conditions-item">
            <img src="bilesenler/air.svg">
            <div class="conditions-info">
                <h5 class="regular-txt">RÃ¼zgar</h5>
                <h5 class="RÃ¼zgar-value-txt">14 Km/s</h5>
            </div>
        </div>
     </div>
     <div class="forecast-items-container">    
        <div class="forecast-item">
            <h5 class="forecast-item-date regular-txt">22 Nisan</h5>
            <img src="bilesenler/fÄ±rtÄ±na.svg" class="forecast-item-img">
            <h5 class="forecast-item-temp">11Â°C</h5> 
        </div>
        <div class="forecast-item">
            <h5 class="forecast-item-date regular-txt">22 Nisan</h5>
            <img src="bilesenler/fÄ±rtÄ±na.svg" class="forecast-item-img">
            <h5 class="forecast-item-temp">11Â°C</h5> 
        </div>
        <div class="forecast-item">
            <h5 class="forecast-item-date regular-txt">22 Nisan</h5>
            <img src="bilesenler/fÄ±rtÄ±na.svg" class="forecast-item-img">
            <h5 class="forecast-item-temp">11Â°C</h5> 
        </div>
        <div class="forecast-item">
            <h5 class="forecast-item-date regular-txt">22 Nisan</h5>
            <img src="bilesenler/fÄ±rtÄ±na.svg" class="forecast-item-img">
            <h5 class="forecast-item-temp">11Â°C</h5> 
        </div>
        <div class="forecast-item">
            <h5 class="forecast-item-date regular-txt">22 Nisan</h5>
            <img src="bilesenler/fÄ±rtÄ±na.svg" class="forecast-item-img">
            <h5 class="forecast-item-temp">11Â°C</h5> 
        </div>
     </div>

    </section>

   <section class="Sehir-arayin section-message">  
        <img src="bilesenler/girissekran.svg">
        <div>
            <h1>Åžehir arayÄ±n</h1>
            <h4 class="regular-txt"></h4>
            Hava durumunu Ã¶ÄŸrenin
        </div>
    </section> 
    
    <section class="Sehir-bulunamadi section-message" style="display: none;">
        <img src="bilesenler/uyarÄ±.svg">
        <div>
            <h1>LÃ¼tfen geÃ§erli bir ÅŸehir girin.</h1>
        </div>
    </section>

</div>

</main>
</body>
</html>
